.container
  = form_for @schedule do |f|
    - if @schedule.errors.any?
      #error_explanation
        %h2= "#{pluralize(@schedule.errors.count, "error")} prohibited this schedule from being saved:"
        %ul
          - @schedule.errors.full_messages.each do |message|
            %li= message

    .field
      = f.label :datetime, "Data e hora"
      = f.datetime_select :datetime
    
    %h3 Anfitrião:
    = f.select :host, options_from_collection_for_select(@hosts, "id", "name"), include_blank: "Criar novo Anfitrião"
    = link_to 'add_host', remote: true


    = f.fields_for :host do |h|
      .field
        = h.label :name, "Nome"
        = h.text_field :name
      .field
        = h.label :credential, "Credencial"
        = h.text_field :credential
      .field
        = h.label :email
        = h.text_field :email

    %h3 Visitantes:
    = f.fields_for :visitors do |v|
      .field
        = v.label :name, "Nome"
        = v.text_field :name
      .field
        = v.label :credential, "Credencial"
        = v.text_field :credential
      .field
        = v.label :email
        = v.text_field :email
    .actions
      = f.submit 'Salvar'


= submit_tag "Add Host", type: "button", id: "addHost", onclick: 'addHostField()'

%ul{id: "myList"}
